!function(e){function t(r){if(o[r])return o[r].exports;var i=o[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var o={};t.m=e,t.c=o,t.d=function(e,o,r){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=10)}([function(e,t,o){"use strict";function r(e,t){return void 0!=e?new n(e,t):this}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.message=e,this.name="IndexOutOfArrayException"}return e}();t.IndexOutOfArrayExecption=i;var n=function(){function e(e,t){var o;if("string"==typeof e)o=document.querySelectorAll(e),void 0!=t&&(o=[o[t]]);else{if(void 0==e||e==document)return this.ready=function(e){document.addEventListener("DOMContentLoaded",e)},this;if("object"!=typeof e)return"ExtJsObject"==e.type?e:void 0;o=void 0==e.length?[e]:void 0!=t?[e[t]]:e}this.type="ExtJsObject",this.node=o}return e.prototype.html=function(e){if(void 0!=e){for(var t=0;t<this.node.length;t++){var o=this.node[t];"string"!=typeof e&&"number"!=typeof e||(o.innerHTML=e)}return this}return this.node[0].innerHTML},e.prototype.text=function(e){if(void 0!=e){for(var t=0;t<this.node.length;t++){var o=this.node[t];"string"!=typeof e&&"number"!=typeof e||(o.innerText=e)}return this}return this.node[0].innerText},e.prototype.click=function(e,t){for(var o=0;o<this.node.length;o++){var r=this.node[o];if(void 0===t)void 0!==e?r.addEventListener("click",e):r.click();else if(void 0!==e){var i=r;r.addEventListener("click",function(o){if(i.querySelector(t)==o.target){var r=i.querySelector(t);r.prototype.toDo=e,r.toDo()}})}else{var i=r,n=i.querySelector(t);n.click()}}return this},e.prototype.get=function(e){if(void 0!=e){if(void 0==this.node[e])throw new i("ExtJsObject.get undefined index node["+e+"]");return this.node[e]}if(void 0==this.node[0])throw new i("ExtJsObject.get undefined index node[0]");return this.node[0]},e.prototype.height=function(e){for(var t=0;t<this.node.length;t++){var o=this.node[t];if(void 0===e)return o.offsetHeight;o.style.height=e}return this},e.prototype.width=function(e){for(var t=0;t<this.node.length;t++){var o=this.node[t];if(void 0===e)return o.offsetWidth;o.style.width=e}return this},e.prototype.addClass=function(e){for(var t=0;t<this.node.length;t++){this.node[t].classList.add(e)}return this},e.prototype.removeClass=function(e){for(var t=0;t<this.node.length;t++){this.node[t].classList.remove(e)}return this},e.prototype.remove=function(){for(var e=0;e<this.node.length;e++){var t=this.node[e];t.parentElement.removeChild(t)}},e.prototype.child=function(e){for(var t=[],o=0;o<this.node.length;o++){var i=this.node[o],n=document.createElement(e);i.appendChild(n),t.push(n)}return r(t)},e.prototype.css=function(e,t,o){var r=o;if(void 0==o&&(o=0),void 0==t)return this.node[o].style[e];if(void 0!=r)return this.node[o].style[e]=t,this;for(var i=0;i<this.node.length;i++){this.node[i].style[e]=t}return this},e.prototype.attr=function(e,t,o){var r=o;if(void 0==o&&(o=0),void 0==t)return this.node[o].getAttribute(e);if(void 0!=r)return this.node[o].style[e]=t,this;for(var i=0;i<this.node.length;i++){this.node[i].setAttribute(e,t)}return this},e.prototype.parent=function(e){for(var t=[],o=0;o<this.node.length;o++){var i=this.node[o];void 0==e?t.push(i.parentElement):t.push(i.closest(e))}return r(t)},e.prototype.value=function(e){if(void 0!=e){for(var t=0;t<this.node.length;t++){var o=this.node[t];"string"!=typeof e&&"number"!=typeof e||(o.value=e)}return this}this.node[0];return this.node[0].value},e.prototype.keypress=function(e,t){for(var o=0;o<this.node.length;o++){var r=this.node[o];if(void 0===t)void 0!==e&&r.addEventListener("keypress",e);else if(void 0!==e){var i=r;r.addEventListener("keypress",function(o){if(i.querySelector(t)==o.target){var r=i.querySelector(t);r.prototype.toDo=e,r.toDo()}})}}return this},e.prototype.input=function(e,t){for(var o=0;o<this.node.length;o++){var r=this.node[o];if(void 0===t)void 0!==e&&r.addEventListener("input",e);else if(void 0!==e){var i=r;r.addEventListener("input",function(o){if(i.querySelector(t)==o.target){var r=i.querySelector(t);r.prototype.toDo=e,r.toDo()}})}}return this},e.prototype.keydown=function(e,t){for(var o=0;o<this.node.length;o++){var r=this.node[o];if(void 0===t)void 0!==e&&r.addEventListener("keydown",e);else if(void 0!==e){var i=r;r.addEventListener("keydown",function(o){if(i.querySelector(t)==o.target){var r=i.querySelector(t);r.prototype.toDo=e,r.toDo()}})}}return this},e.prototype.change=function(e,t){for(var o=0;o<this.node.length;o++){var r=this.node[o];if(void 0===t)void 0!==e&&r.addEventListener("change",e);else if(void 0!==e){var i=r;r.addEventListener("change",function(o){if(i.querySelector(t)==o.target){var r=i.querySelector(t);r.prototype.toDo=e,r.toDo()}})}}return this},e.prototype.keyup=function(e,t){for(var o=0;o<this.node.length;o++){var r=this.node[o];if(void 0===t)void 0!==e&&r.addEventListener("keyup",e);else if(void 0!==e){var i=r;r.addEventListener("keyup",function(o){if(i.querySelector(t)==o.target){var r=i.querySelector(t);r.prototype.toDo=e,r.toDo()}})}}return this},e.prototype.prevSibling=function(){for(var e=[],t=0;t<this.node.length;t++){var o=this.node[t];e.push(o.previousSibling)}return r(e)},e.prototype.nextSibling=function(){for(var e=[],t=0;t<this.node.length;t++){var o=this.node[t];e.push(o.nextSibling)}return r(e)},e.prototype.forEach=function(e){this.node.forEach(function(t){e.bind(t)()})},e}();t.ExtJsObject=n;var a=function(){function e(){}return e.prototype.GET=function(e,t,o){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4==r.readyState&&200==r.status)t(r.responseText);else if(4==r.readyState&&void 0!=o)try{o()}catch(e){}},r.open("GET",e,!0),r.send()},e.prototype.DELETE=function(e,t,o){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4==r.readyState&&200==r.status)t(r.responseText);else if(4==r.readyState&&void 0!=o)try{o()}catch(e){}},r.open("GET",e,!0),r.setRequestHeader("x-http-method-override","DELETE"),r.send()},e.prototype.POST=function(e,t,o,r){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==i.readyState&&200==i.status)o(i.responseText);else if(4==i.readyState&&void 0!=r)try{r()}catch(e){}},i.open("POST",e,!0);for(var n=Object.keys(t),a="",d=0;d<n.length;d++)0!==d&&(a+="&"),a=a+n[d]+"="+t[n[d]];i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send(a)},e.prototype.PUT=function(e,t,o,r){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==i.readyState&&200==i.status)o(i.responseText);else if(4==i.readyState&&void 0!=r)try{r()}catch(e){}},i.open("POST",e,!0);for(var n=Object.keys(t),a="",d=0;d<n.length;d++)0!==d&&(a+="&"),a=a+n[d]+"="+t[n[d]];i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.setRequestHeader("x-http-method-override","PUT"),i.send(a)},e}();t.AR=new a,t.$=r},function(e,t){function o(e,t){var o=e[1]||"",i=e[3];if(!i)return o;if(t&&"function"==typeof btoa){var n=r(i);return[o].concat(i.sources.map(function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"})).concat([n]).join("\n")}return[o].join("\n")}function r(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var r=o(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r}).join("")},t.i=function(e,o){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var n=this[i][0];"number"==typeof n&&(r[n]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&r[a[0]]||(o&&!a[2]?a[2]=o:o&&(a[2]="("+a[2]+") and ("+o+")"),t.push(a))}},t}},function(e,t,o){function r(e,t){for(var o=0;o<e.length;o++){var r=e[o],i=f[r.id];if(i){i.refs++;for(var n=0;n<i.parts.length;n++)i.parts[n](r.parts[n]);for(;n<r.parts.length;n++)i.parts.push(c(r.parts[n],t))}else{for(var a=[],n=0;n<r.parts.length;n++)a.push(c(r.parts[n],t));f[r.id]={id:r.id,refs:1,parts:a}}}}function i(e,t){for(var o=[],r={},i=0;i<e.length;i++){var n=e[i],a=t.base?n[0]+t.base:n[0],d=n[1],s=n[2],l=n[3],c={css:d,media:s,sourceMap:l};r[a]?r[a].parts.push(c):o.push(r[a]={id:a,parts:[c]})}return o}function n(e,t){var o=v(e.insertInto);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=y[y.length-1];if("top"===e.insertAt)r?r.nextSibling?o.insertBefore(t,r.nextSibling):o.appendChild(t):o.insertBefore(t,o.firstChild),y.push(t);else if("bottom"===e.insertAt)o.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=v(e.insertInto+" "+e.insertAt.before);o.insertBefore(t,i)}}function a(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=y.indexOf(e);t>=0&&y.splice(t,1)}function d(e){var t=document.createElement("style");return e.attrs.type="text/css",l(t,e.attrs),n(e,t),t}function s(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",l(t,e.attrs),n(e,t),t}function l(e,t){Object.keys(t).forEach(function(o){e.setAttribute(o,t[o])})}function c(e,t){var o,r,i,n;if(t.transform&&e.css){if(!(n=t.transform(e.css)))return function(){};e.css=n}if(t.singleton){var l=g++;o=m||(m=d(t)),r=p.bind(null,o,l,!1),i=p.bind(null,o,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(o=s(t),r=h.bind(null,o,t),i=function(){a(o),o.href&&URL.revokeObjectURL(o.href)}):(o=d(t),r=u.bind(null,o),i=function(){a(o)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}function p(e,t,o,r){var i=o?"":r.css;if(e.styleSheet)e.styleSheet.cssText=k(t,i);else{var n=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(n,a[t]):e.appendChild(n)}}function u(e,t){var o=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}function h(e,t,o){var r=o.css,i=o.sourceMap,n=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||n)&&(r=x(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),d=e.href;e.href=URL.createObjectURL(a),d&&URL.revokeObjectURL(d)}var f={},b=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),v=function(e){var t={};return function(o){if(void 0===t[o]){var r=e.call(this,o);if(r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[o]=r}return t[o]}}(function(e){return document.querySelector(e)}),m=null,g=0,y=[],x=o(3);e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},t.attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=b()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var o=i(e,t);return r(o,t),function(e){for(var n=[],a=0;a<o.length;a++){var d=o[a],s=f[d.id];s.refs--,n.push(s)}if(e){r(i(e,t),t)}for(var a=0;a<n.length;a++){var s=n[a];if(0===s.refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete f[s.id]}}}};var k=function(){var e=[];return function(t,o){return e[t]=o,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var o=t.protocol+"//"+t.host,r=o+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(i))return e;var n;return n=0===i.indexOf("//")?i:0===i.indexOf("/")?o+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(n)+")"})}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(0),i="Erreur de communication avec le serveur",n=function(){function e(){this.api_url="api"}return e.prototype.logout=function(){r.AR.GET(this.api_url+"api?res=logout",function(){return window.location.href="login"},function(){return alert(i)})},e.prototype.login=function(e,t,o){if(void 0==e)r.AR.GET(this.api_url+"api?res=login",function(e){var r;try{r=JSON.parse(e)}catch(e){r={isConnected:!1}}1==r.isConnected?void 0!=t&&t(r):void 0!=o&&o(r)});else{var n=e.email,a=e.password,d=e.keep_connection;try{r.AR.POST(this.api_url+"api/index.php?res=login&keep_connection="+d,{user_email:n,user_password:a},function(e){var r;try{r=JSON.parse(e)}catch(e){r={isConnected:!1}}1==r.isConnected?void 0!=t&&t(r):void 0!=o&&o()},function(){alert(i)})}catch(e){}}},e}();t.SharedModel=n;var a=function(){function e(){this.isDb=!1}return e.prototype.get=function(e){for(var t=this._hash,o=t.split(";"),r=0;r<o.length;r++){var i=o[r],n=i.split("=");if(n[0]==e)return n[1]}return""},Object.defineProperty(e.prototype,"name",{get:function(){var e="";return""!=this.get("page")?e=this.get("page"):""!=this.get("p")&&(e=this.get("p")),""!=e?e:"home"},enumerable:!0,configurable:!0}),e.prototype.changeUrl=function(e,t){if(void 0!==history.pushState){var o={Page:e,Url:t};history.pushState(o,o.Page,o.Url)}else window.location.href=e},e.prototype.setHash=function(e){if(1==this.isDb){var t=e.split("/");return e=t[t.length-1],"dashboard.php"==e&&(e="home"),e=e.replace("dashboard-",""),e.indexOf("manage-project-")>=0?"p=manage-project;id="+e.replace("manage-project-",""):e.indexOf("publish-project-")>=0?"p=publish-project;id="+e.replace("publish-project-",""):"p="+e}var t=e.split("/");return e=t[t.length-1],0==e.indexOf("project-")?"p=project;id="+e.replace("project-",""):"p="+e},e.prototype.addUrlSwitcher=function(){for(var e=this,t=document.querySelectorAll("[data-internal=true]"),o=0;o<t.length;o++){t[o].onclick=function(t){return e.hash=e.setHash(t.target.href),e.changeUrl("Groupe vicri",t.target.href),window.onhashchange(),!1}}},Object.defineProperty(e.prototype,"hash",{set:function(e){this._hash=e},enumerable:!0,configurable:!0}),e}();t.P=a},,,,,,function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o(11);var r=o(13),i=o(0),n=o(16),a=function(){function e(e,t,o){this._page=e,this._model=t,this._view=o}return e.prototype.loadPage=function(){this._model.login(void 0,this.choosePage.bind(this),this.choosePage.bind(this)),this._view.restoreMenu()},e.prototype.choosePage=function(e){switch(this._view.clear(),this._view.applyTheme(),this._page.name){case"home":this._view.buildHomePage(this._model.getHistory.bind(this._model));break;case"dark":this._view.setDarkTheme(),this._view.buildHomePage(this._model.getHistory.bind(this._model));break;case"light":this._view.setLightTheme(),this._view.buildHomePage(this._model.getHistory.bind(this._model));break;case"calendar":this._view.buildCalendarPage(this._model.getEvents.bind(this._model),this._model.getUsersProject.bind(this._model),this._model.createEvent.bind(this._model));break;case"my-projects":this._model.getUsersProject(this._view.buildMyProjectsPage.bind(this._view));break;case"manage-project":var t=this._page.get("id");this._model.getProjectById(t,this._view.buildManageProjectPage.bind(this._view),this._view.buildErrorPage.bind(this._view),this._model.getHistory.bind(this._model),this._model.updateProject.bind(this._model),[this._model.getAllUsers.bind(this._model),this._model.addUserToProject.bind(this._model),this._model.removeUserFromProject.bind(this._model)]);break;case"publish-project":var o=this._page.get("id");this._model.getProjectById(o,this._view.buildPublishProjectPage.bind(this._view),this._view.buildErrorPage.bind(this._view),{video:this._model.uploadVideoProject.bind(this._model),img_uploader:this._model.uploadImage.bind(this._model),photo:this._model.uploadPhotoProject.bind(this._model)});break;case"admin":1==e.isAdmin?this._view.buildAdminPage(this._model.createUser.bind(this._model)):this._view.buildErrorPage({type:"error",message:"Vous ne possèdez pas les autorisations nécessaires. Cette partie est réservée aux admins."});break;case"new-project":this._view.buildNewProjectPage(this._model.createProject.bind(this._model));break;case"pv":this._model.getAllMeetingReports(this._view.buildPVPage.bind(this._view));break;default:this._view.buildErrorPage({type:"error",message:"Erreur 404 : cette page est introuvable"})}},Object.defineProperty(e.prototype,"page",{get:function(){return this._page},enumerable:!0,configurable:!0}),e}();i.$(document).ready(function(){var e=new n.Page,t=new n.Model,o=new r.View;o.container=i.$(".body"),t.api_url="",e.isDb=!0;var d=new a(e,t,o);d.page.hash=window_hash,d.loadPage(),o.page=d.page,window.onpopstate=function(e){d.page.hash=d.page.setHash(document.location.href),window.onhashchange()},window.onhashchange=function(){d.loadPage()};var s=i.$(".left_panel");i.$(".hamburger").click(function(){this.classList.contains("clicked")?(i.$(this).removeClass("clicked"),i.$(this).addClass("none"),s.removeClass("open")):(i.$(this).removeClass("none"),i.$(this).addClass("clicked"),s.addClass("open"))})})},function(e,t,o){var r=o(12);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0};i.transform=void 0;o(2)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,o){t=e.exports=o(1)(!1),t.push([e.i,'body{background:#f9f9f9;font-family:sans-serif}table{font-family:arial,sans-serif;border-collapse:collapse}td,th{border:1px solid #eaeaea;text-align:left;padding:8px;text-align:center}tr:nth-child(2n){background-color:#eaeaea}.header{position:fixed;top:0;left:300px;right:0;height:40px;background:#fff;vertical-align:center;line-height:40px;padding:15px;font-size:18px;color:#646464;box-shadow:0 0 5px rgba(0,0,0,.1)}@media (max-width:1216px){.header{left:0}.header .user{display:none}}.header .user{float:right}.hamburger,.header .user .acccount-manager{cursor:pointer}.hamburger{z-index:100;display:none;position:fixed;top:6px;right:25px;width:54px;height:54px;-webkit-transition:.5s;transition:.5s;border-radius:50%;outline:none}@media (max-width:1216px){.hamburger{display:block}}.hamburger span{top:50%;left:50%;-webkit-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%)}.hamburger span,.hamburger span:after,.hamburger span:before{position:absolute;display:block;width:22px;height:2px;background-color:gray}.hamburger span:after,.hamburger span:before{top:0;left:0;content:"";-webkit-transition:.5s;-webkit-transition:-webkit-transform .25s;transition:.5s;transition:-webkit-transform .25s;transition:transform .25s;transition:transform .25s,-webkit-transform .25s;-webkit-transform:translateY(-6px);transform:translateY(-6px)}.hamburger span:after{-webkit-transform:translateY(6px);transform:translateY(6px)}svg{-webkit-transition:stroke-dashoffset 1s;transition:stroke-dashoffset 1s;fill:transparent;stroke-width:2;stroke:#fff;stroke-dasharray:170;stroke-dashoffset:170}.clicked{-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.clicked span{background-color:transparent}.clicked span:before{-webkit-transform:translateY(0) rotate(45deg);transform:translateY(0) rotate(45deg);background-color:#fff}.clicked span:after{-webkit-transform:translateY(0) rotate(-45deg);transform:translateY(0) rotate(-45deg);background-color:#fff}.clicked svg{-webkit-transform:rotate(180px);transform:rotate(180px);stroke-dashoffset:0}.left_panel{background:#1d2939;position:fixed;top:0;left:0;bottom:0;width:300px}@media (max-width:1216px){.left_panel{transition:.45s;transform:translateX(calc(100vw + 300px));z-index:99;opacity:0}.left_panel.open{opacity:1;transform:translateX(0);width:100%}}.left_panel a{color:inherit;text-decoration:none}.left_panel .title{background:#00a2d3;color:#fff;position:absolute;top:0;left:0;right:0;height:70px;line-height:70px;padding-left:15px}.left_panel .content{position:absolute;top:70px;bottom:0;left:0;right:0;padding:0}.left_panel .content a,.left_panel .content div{color:#fff;padding:15px;padding-top:20px;padding-bottom:20px;display:block}.left_panel .content a:hover,.left_panel .content div:hover{background:#333645;cursor:pointer}.body .field,.modal .field,body.dark .modal .field{position:relative;margin:16px 0;margin-top:24px;padding:4px}.body .field .top,.modal .field .top,body.dark .modal .field .top{display:block;position:absolute;top:10px;left:2px;color:#6f6f6f;transition:.29s;transform-origin:left}.body .focus.field .top,.body .notempty.field .top,.modal .focus.field .top,.modal .notempty.field .top{position:absolute;top:2px;transform:translateY(-75%) scale(.75)}.body .focus.field .top,.modal .focus.field .top{color:#2474d1}.body .field input,.body .field select,.body .field textarea,.modal .field input,.modal .field select,.modal .field textarea,body.dark .modal .field input,body.dark .modal .field select,body.dark .modal .field textarea{position:relative;display:block;padding:8px;padding-left:2px;border:none;width:100%;outline:none;background:transparent;font-family:Roboto,sans-serif}.body .field textarea,.modal .field textarea,body.dark .modal .field textarea{resize:vertical;height:100px}.body .field:after,.body .field:before,.modal .field:after,.modal .field:before,body.dark .modal .field:after,body.dark .modal .field:before{content:"";height:2px;position:absolute;bottom:0;left:0;right:0;background:#ccc}.body .field:after,.modal .field:after,body.dark .modal .field:after{background:#2474d1;transform:scaleX(0);transition:.29s}.body .focus.field:after,.modal .focus.field:after{transform:scaleX(1)}.body{position:fixed;top:73px;right:0;left:300px;bottom:0;overflow:auto;padding:15px;background:#f6f6f4}@media (max-width:1216px){.body{left:0}}.body .panel{word-wrap:break-word;background:#fff;margin:0;margin-bottom:15px;position:relative;border:1px solid #ededed;box-shadow:0 0 5px rgba(0,0,0,.1);border:5px;border-radius:3px;color:gray}.body .panel.col2{width:calc(50% - 15px);max-width:calc(50% - 15px);min-height:calc(40vh - 30px)}@media (max-width:1216px){.body .panel.col2{width:calc(100% - 30px);max-width:calc(100% - 30px)}}.body .panel.col2.right{float:right}@media (min-width:1216px){.body .panel.col2.padding{max-width:calc(50% - 45px)}}.body .panel.padding{padding:15px}.body .panel .title{font-size:22px;color:rgba(0,0,0,.87)}.body .panel .button,.body .panel button{display:inline-block;text-decoration:none;background:#44b8af;padding:7px 12px;border-radius:4px;border:none;color:#fff;cursor:pointer;margin-right:5px;margin-bottom:5px}.body .panel.login{position:fixed;top:0;bottom:0;left:0;right:0;z-index:100;background:#eee}.body .panel.login>div{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);word-wrap:break-word;background:#fff;border:1px solid #ededed;box-shadow:0 0 5px rgba(0,0,0,.1);border:5px;border-radius:3px;padding:25px}.body .error_container{display:inline-block;vertical-align:top;max-width:100%;background:#e2747d;height:calc(100% - 30px);border-radius:10px;width:100%}.body .error_container .error_zone{position:absolute;text-align:center;top:50%;left:50%;max-width:50%;transform:translate(-50%,-50%);color:#fff}.body .error_container .error_zone img{max-width:calc(50% - 25px);max-height:calc(50% - 25px)}.mask{transition:1s;background:rgba(0,0,0,.25);position:fixed;top:0;right:0;bottom:0;left:0;z-index:100}.mask.hidden{opacity:0}.mask.hidden .modal{transform:scale(0)}.modal{position:absolute;top:50%;left:50%;background:#fff;margin:0;margin-bottom:15px;position:relative;border:1px solid #ededed;box-shadow:0 0 5px rgba(0,0,0,.1);border-radius:5px;width:300px;min-height:300px;max-height:calc(100% - 100px);transform:translate(-50%,-50%);overflow:hidden;padding:25px}.modal .cross{font-size:18px;position:absolute;top:21px;right:25px;cursor:pointer;color:red}.modal .title{display:block;height:32px;line-height:32px;padding-left:5px;font-size:18px;text-align:center}.modal table{width:100%}.modal .button{display:inline-block;text-decoration:none;background:#44b8af;padding:7px 12px;border-radius:4px;border:none;color:#fff;cursor:pointer;margin-right:5px}.modal input{padding:5px;border:1px solid #d3d3d3;width:100%;margin-bottom:5px}.button.danger,button.danger{background:#eb1f48}body.dark{background:#2b333f}body.dark .header{background:#374355;color:#fff}body.dark .body{background:#2b333f}body.dark .body .panel{background:#3d4d65;color:#fff}body.dark .body .panel .title{color:#fff}body.dark .body .panel .button,body.dark .body .panel button{background:#0081d5}body.dark .body .panel a{color:#fff}body.dark table{color:#fff;font-family:arial,sans-serif;border-collapse:collapse}body.dark td,body.dark th{border:1px solid rgba(0,0,0,.1);text-align:left;padding:8px;text-align:center}body.dark tr:nth-child(2n){background-color:hsla(0,0%,100%,.1)}body.dark .field .top,body.dark .field input,body.dark .field select,body.dark .field textarea{color:#fff}body.dark .modal{background:#3d4d65;border:none}body.dark .modal .title{color:#fff}body.dark .modal .button,body.dark .modal button{background:#0081d5}body.dark .modal .button.danger,body.dark .modal button.danger{background:#e92f2f}body.dark .modal input{color:#fff;background:hsla(0,0%,100%,.1);border:1px solid #334155;border-radius:4px}body.dark .modal .field label.top{color:#fff}body.dark .left_panel{background:#2b2e3d}body.dark .left_panel .title{background:#2b2e3d;color:#0c98f5}',""])},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(0),i=o(14),n=o(15),a=function(){function e(){}return e.prototype.buildCalendarPage=function(e,t,o){var i=this,n=this.container;r.$(".header .title").html("Calendrier");var a=n.child("div").addClass("calendar").addClass("padding").addClass("panel");a.child("div").html("Calendrier du groupe vicri").addClass("title");var d=a.child("p").child("button").html("Ajouter un évènement");e(function(e){return e.forEach(function(e){var t=a.child("p");t.child("b").html(e.date);var o=t.child("b");"-1"==e.project_id?o.html(" [Vicri] "):o.html(' [<a href="dashboard-manage-project-1" data-internal="true">Projet</a>] '),t.child("span").html(" - "+e.title),t.child("i").html(" - "+e.description),i.page.addUrlSwitcher()})}),d.click(function(){t(function(e){var t=[["Site web (pour tous)","-1"]];e.forEach(function(e){t.push([e.name,e.id])});var r=i.createModalDialog("Ajouter un event"),n=r.child("span").html("").css("color","crimson").css("display","block").css("text-align","center"),a=i.buildInput(r,"Nom ","input"),d=i.buildInput(r,"Message ","textarea"),s=i.buildInput(r,"Ajouter à ","select"),l=i.buildInput(r,"Date","date"),c=i.buildInput(r,"Heure","time");r.child("button").addClass("button").css("float","right").html("Ajouter cette date au calendrier").click(function(){o({title:a.value(),message:d.value(),add_to:s.value(),date:l.value()+" "+c.value()},function(e){0==e.indexOf("ok")?window.location.reload():n.html(e)})});t.forEach(function(e){var t=document.createElement("option");t.value=e[1],t.text=e[0],s.get(0).add(t)}),s.get(0).focus()})})},e.prototype.buildAdminPage=function(e){var t=this.container;r.$(".header .title").html("Admins");var o=t.child("div").css("display","inline-block").css("vertical-align","top").addClass("panel").addClass("padding").css("width","calc(100% - 30px)").addClass("left"),i=!1;"login"==window.location.hash.replace("#","")&&(i=!0,o.addClass("login"),r.$(".hamburger").css("display","none"));var n=o;o=o.child("div"),o.child("div").html(1==i?"Vous êtes admin sur ce site":"Admin Panel").addClass("title"),o.child("p").html("\n                <b>Vous recevez de grands pouvoirs mais aussi de grandes responsabilités : </b><br /><br />\n                1) Toutes vos actions doivent être réalisées dans le respect de la vie privée d'autrui<br /><br />\n                2) Toutes vos actions ont des conséquences : réfléchissez avant d'agir ! (et pas l'inverse)\n            ");var a=t.child("div").css("display","none").css("vertical-align","top").addClass("panel").addClass("padding").css("width","calc(100% - 30px)").addClass("left");a.child("div").html("Gestion des utilisateurs").addClass("title"),a.child("b").html("Ajouter un utilisateur");var d=a.child("p"),s=this.buildInput(d,"Prénom","text"),l=this.buildInput(d,"Nom","text"),c=this.buildInput(d,"Email","text","@indse.be"),p=this.buildInput(d,"Pseudo","text"),u=this.buildInput(d,"Mot de passe","password"),h=d.child("button");h.html("Ajouter"),h.click(function(){e({firstname:s.value(),name:l.value(),mail:c.value(),pseudo:p.value(),password:u.value()},function(e){"ok"==e?window.location.reload():alert(e)})}),a.child("b").html("Utilisateurs actuels"),o.child("button").addClass("button").html("Compris, continuer").click(function(){a.css("display","inline-block"),n.remove(),1==i&&(r.$(".hamburger").css("display","block"),window.location.href="dashboard-home")})},e.prototype.restoreMenu=function(){document.querySelector(".hamburger").classList.contains("clicked")&&r.$(".hamburger").click()},e.prototype.applyTheme=function(){"dark"==i.get("theme")?this.setDarkTheme():this.setLightTheme()},e.prototype.setDarkTheme=function(){r.$("body").addClass("dark"),i.set("theme","dark",{expires:60}),this.page.addUrlSwitcher()},e.prototype.setLightTheme=function(){r.$("body").removeClass("dark"),i.set("theme","light",{expires:60}),this.page.addUrlSwitcher()},e.prototype.clear=function(){this.container.html("")},e.prototype.buildHomePage=function(e){var t=this,o=this.container;r.$(".header .title").html("Home page");var i=o.child("div").css("display","inline-block").css("vertical-align","top").addClass("panel").addClass("padding").addClass("col2").addClass("left");i.child("div").html("Bienvenue sur le dashboard vicri !").addClass("title"),i.child("p").html("Bienvenue sur votre tableau de bord ;-). Ici, vous retrouverez toutes les fonctions présentes sur la version précédente du site et plus encore :-)."),i.child("a").addClass("button").html("Découvrir les projets").get(0).href="projects",i.child("a").addClass("button").html("Créer un projet").attr("data-internal",!0).get(0).href="dashboard-new-project",i.child("a").addClass("button").html("PV des réunions").attr("data-internal",!0).get(0).href="dashboard-pv";var n=o.child("div").css("display","inline-block").css("vertical-align","top").addClass("panel").addClass("padding").addClass("col2").addClass("right");n.child("div").html("Quoi de neuf ?").addClass("title"),e("-1",function(e){e.forEach(function(e){var o=n.child("p");t.buildHistory(o,e)})}),this.page.addUrlSwitcher()},e.prototype.buildHistory=function(e,t){e.child("i").html(t.content.date+" - "),"test"==t.type?(e.child("b").html(t.content.user+" "),e.child("span").html(" a créé une entrée dans l'historique du site vicri")):"project_update"==t.type?(e.child("b").html(t.content.user+" "),e.child("span").html(" a mis à jour le(s) champ(s) "+t.content.props.toString()+" de ce projet")):"project_created"==t.type&&(e.child("b").html(t.content.user+" "),e.child("span").html(" a créé le projet "+t.content.name))},e.prototype.buildErrorPage=function(e){r.$(".header .title").html("Erreur");var t=this.container.addClass("panel").addClass("padding").child("div").addClass("error_container"),o=t.child("div").addClass("error_zone");o.child("img").get(0).src="res/error.svg";o.child("h1").html("Une erreur est survenue"),o.child("p").html(e.message)},e.prototype.buildInput=function(e,t,o,r){var i,n=["text","password","number","range","date","time"],a=e.child("div").addClass("field");a.child("label").addClass("top").html(t);n.indexOf(o)>=0?(i=a.child("input").addClass("input"),i.get(0).type=o):i=a.child(o).addClass("input").addClass(o);var d=i.get(0);return d.onfocus=function(){this.parentElement.classList.add("focus"),this.parentElement.classList.contains("notempty")&&this.parentElement.classList.remove("notempty")},d.onblur=function(){"date"!=o&&"time"!=o&&this.parentElement.classList.remove("focus"),""!=this.value&&this.parentElement.classList.add("notempty")},r&&i.value(r),d.onfocus(),d.onblur(),i},e.prototype.createModalDialog=function(e){var t=r.$("body").child("div").addClass("mask"),o=t.child("div").addClass("modal"),i=(o.child("span").html(e).addClass("title"),o.child("span").addClass("cross").html("×"));return t.click(function(e){e.target!=t.get(0)&&null!=e.target||(t.addClass("hidden"),setTimeout(function(){t.remove()},1e3))}),i.click(function(){t.click()}),o},e.prototype.buildPublishProjectPage=function(e,t){if(1==e.isPublished)return void this.buildErrorPage({type:"error",message:"Ce projet est déjà publié"});r.$(".header .title").html("Publier un projet");var o=this.container,i=o.child("div").css("display","inline-block").css("vertical-align","top").addClass("panel").addClass("padding").css("width","calc(100% - 30px)").addClass("left");i.child("div").html("Assistant de publication").addClass("title"),i.child("b").html("<br />Type de projet : "+e.type),"photo"==e.type&&i.child("p").html("Vous pourrez uploader toutes les photos sur la page suivante. Pour le moment, choisissez une photo de couverture.");var a,d,s,l=this.buildInput(i,"Titre","text",e.name),c=this.buildInput(i,"Description résumée du projet","textarea",e.shortDescription);switch(e.type){case"video":a=this.buildInput(i,"URL de la vidéo sur YouTube","text",""),a.input(function(){n(a.value())?a.css("color",""):a.css("color","red")}),d=i.child("button").html("Publier la vidéo").click(function(){i.css("display","none"),n(a.value())?t.video({project_id:e.id,title:l.value(),description:c.value(),url:n(a.value())},function(e){i.css("display","block"),"e:r"==e?alert("Une erreur est survenue lors de la communication avec le serveur"):"ok"==e?(alert("Votre vidéo a été publiée sur le site :-)"),window.location.href="videos"):alert(e)}):(i.css("display","block"),alert("L'url fournie n'est pas valide"))});break;default:var p,u=i.child("input").attr("type","file").addClass("button").change(function(){d.attr("disabled","true").css("opacity","0.2"),t.img_uploader(u.get(0).files[0],function(e){p.html("En cours : "+100*e.loaded/e.total+"%")},function(e){void 0!=e?(p.html('Uploadé ! <br /><img style="height:150px;" src="'+e+'"><br />'),s=e,d.css("opacity","1").get(0).disabled=!1):p.html("Erreur !")})});p=i.child("span").html("Uploadez une image de couverture"),i.child("br"),d=i.child("button").html("Publier le projet").click(function(){if(d.attr("disabled","true").css("opacity","0.2"),!s)return alert("Uploadez une image de couverture pour illustrer le projet."),!1;"photo"==e.type?t.photo({project_id:e.id,title:l.value(),description:c.value(),cover:s},function(t){if(d.css("opacity","1").get(0).disabled=!1,"e:r"==t)return alert("Une erreur est survenue lors de la communication avec le serveur");"ok"==t?window.location.href="dashboard-manage-images-"+e.id:alert(t)}):t.other({},function(){})})}},e.prototype.buildManageProjectPage=function(e,t,o,i){var n=this,a=this.container;r.$(".header .title").html("Gestion du projet");var d=a.child("div").css("display","inline-block").css("vertical-align","top").addClass("panel").addClass("padding").addClass("col2").addClass("left");d.child("div").html("Gestion du projet").addClass("title");var s=this.buildInput(d,"Nom du projet","text",e.name),l=this.buildInput(d,"Progression du projet (en %)","number",e.progression.toString()),c=l.get(0);c.max="100",c.min="0";var p=this.buildInput(d,"Type de projet","select"),u=p.get(0),h=this.buildInput(d,"Description du projet","textarea",e.description),f=this.buildInput(d,"Description résumée du projet","textarea",e.shortDescription),b=this.buildInput(d,"Objectifs du projet","textarea",e.goals),v=this.buildInput(d,"Liens utiles (séparés par un retour à la ligne)","textarea",e.links),m=d.child("button").addClass("button").html("Modifier"),g=a.child("div").css("display","inline-block").css("vertical-align","top").addClass("panel").addClass("padding").addClass("col2").addClass("right");g.child("div").html("Historique et publication").addClass("title");var y="";e.managers.forEach(function(t,o){return y+=t+(o+1==e.managers.length?"":o+2==e.managers.length?" et ":", ")}),g.child("p").html("Managers : "+y+"  ").child("a").html("[ + ]").click(function(t){t.preventDefault(),i[0](function(t){var o=n.createModalDialog("Gestion des managers"),r=o.child("input"),a=o.child("table");r.get(0).oninput=function(){a.html(""),t.forEach(function(t){var o=t.firstname+" "+t.name;if(!(o.toLowerCase().indexOf(r.get(0).value.toLowerCase())<0)){var n=a.child("tr");if(n.child("td").html(o),e.managers_id.indexOf(t.id)>=0){var d=n.child("td").child("button").html("Supprimer").addClass("button").addClass("danger");d.click(function(){i[2]({user_id:t.id.toString(),project_id:e.id.toString()},function(o){if(o)alert(o);else{e.managers_id.push(t.id);d.parent("td").child("span").html("Supprimé !"),d.remove()}})})}else{var s=n.child("td").child("button").html("Ajouter").addClass("button");s.click(function(){i[1]({user_id:t.id.toString(),project_id:e.id.toString()},function(o){if(o)alert(o);else{e.managers_id.push(t.id);s.parent("td").child("span").html("Ajouté !"),s.remove()}})})}}})},r.get(0).oninput()})}).css("text-decoration","none").get(0).href="#ee",1==e.isPublished?(g.child("p").html("Ce projet est publié !"),e.video?console.log("e"):e.photo?console.log("e1"):e.other&&console.log("e2")):g.child("p").html("Ce projet n'est pas publié ").child("a").attr("data-internal",!0).addClass("button").html("publier").get(0).href="dashboard-publish-project-"+e.id;var x;t(e.id,function(e){e.forEach(function(e,t){var o;if(6==t){var r=g.child("div").css("text-align","center").child("button").html("Afficher plus");x=g.child("p").css("display","none"),r.click(function(){r.remove(),x.css("display","block")})}o=t<6?g.child("p"):x.child("p"),n.buildHistory(o,e)})}),[e.type,"video","photo","code","3d","jeu"].forEach(function(e){var t=document.createElement("option");t.value=e,t.text=e,u.add(t)}),u.onblur(),m.click(function(){o({id:e.id,name:s.value(),progression:l.value(),description:h.value(),shortDescription:f.value(),type:p.value(),goals:b.value(),links:v.value()})}),this.page.addUrlSwitcher()},e.prototype.buildMyProjectsPage=function(e){var t=this.container;r.$(".header .title").html("Mes projets");var o=t.child("div").css("display","inline-block").css("vertical-align","top").addClass("panel").addClass("padding").css("max-width","100%").css("width","calc(100% - 30px)");o.child("div").html("Mes projets").addClass("title");var i=o.child("p").child("table").css("width","100%").css("max-width","100%");o.child("a").addClass("button").html("Créer un projet").attr("data-internal",!0).get(0).href="dashboard-new-project";var n=i.child("tr");n.child("th").html("Nom du projet"),n.child("th").html("Managers"),n.child("th").html("Actions"),e.forEach(function(e){var t=i.child("tr");t.child("td").html(e.name);var o=t.child("td");e.managers.forEach(function(e){o.child("span").html(e+"<br />")}),t.child("td").child("a").addClass("button").html("Modifier").attr("data-internal",!0).get(0).href="dashboard-manage-project-"+e.id}),this.page.addUrlSwitcher()},e.prototype.buildNewProjectPage=function(e){var t=this.container;r.$(".header .title").html("Créer un projet");var o=t.child("div").css("display","inline-block").css("vertical-align","top").addClass("panel").addClass("padding").css("max-width","100%").css("width","calc(100% - 30px)");o.child("div").html("Créer un projet").addClass("title");var i=this.buildInput(o,"Nom du projet","text"),n=this.buildInput(o,"Donnez une courte description de votre projet","textarea"),a=this.buildInput(o,"Type de projet","select"),d=a.get(0);["video","photo","code","3d","jeu"].forEach(function(e){var t=document.createElement("option");t.value=e,t.text=e,d.add(t)}),d.onblur(),o.child("button").click(function(){e({name:i.value(),shortDescription:n.value(),type:a.value()})}).addClass("button").html("Confirmer et créer").attr("data-internal",!0).get(0).href="dashboard-new-project"},e.prototype.buildPVPage=function(e){var t=this.container;r.$(".header .title").html("PV des réunions");var o=t.child("div").css("display","inline-block").css("vertical-align","top").addClass("panel").addClass("padding").css("max-width","100%").css("width","calc(100% - 30px)");o.child("div").html("PV des réunions").addClass("title"),e.forEach(function(e){o.child("p").child("a").html(e).get(0).href=e}),this.page.addUrlSwitcher()},e}();t.View=a},function(e,t,o){var r,i;!function(n){var a=!1;if(r=n,void 0!==(i="function"==typeof r?r.call(t,o,t,e):r)&&(e.exports=i),a=!0,e.exports=n(),a=!0,!a){var d=window.Cookies,s=window.Cookies=n();s.noConflict=function(){return window.Cookies=d,s}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var o=arguments[e];for(var r in o)t[r]=o[r]}return t}function t(o){function r(t,i,n){var a;if("undefined"!=typeof document){if(arguments.length>1){if(n=e({path:"/"},r.defaults,n),"number"==typeof n.expires){var d=new Date;d.setMilliseconds(d.getMilliseconds()+864e5*n.expires),n.expires=d}n.expires=n.expires?n.expires.toUTCString():"";try{a=JSON.stringify(i),/^[\{\[]/.test(a)&&(i=a)}catch(e){}i=o.write?o.write(i,t):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape);var s="";for(var l in n)n[l]&&(s+="; "+l,!0!==n[l]&&(s+="="+n[l]));return document.cookie=t+"="+i+s}t||(a={});for(var c=document.cookie?document.cookie.split("; "):[],p=/(%[0-9A-Z]{2})+/g,u=0;u<c.length;u++){var h=c[u].split("="),f=h.slice(1).join("=");this.json||'"'!==f.charAt(0)||(f=f.slice(1,-1));try{var b=h[0].replace(p,decodeURIComponent);if(f=o.read?o.read(f,b):o(f,b)||f.replace(p,decodeURIComponent),this.json)try{f=JSON.parse(f)}catch(e){}if(t===b){a=f;break}t||(a[b]=f)}catch(e){}}return a}}return r.set=r,r.get=function(e){return r.call(r,e)},r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(t,o){r(t,"",e(o,{expires:-1}))},r.withConverter=t,r}return t(function(){})})},function(e,t,o){!function(t,o){e.exports=o()}(0,function(e){return function(e,t){if(void 0==t&&(t={fuzzy:!0}),/youtu\.?be/.test(e)){var o,r=[/youtu\.be\/([^#\&\?]{11})/,/\?v=([^#\&\?]{11})/,/\&v=([^#\&\?]{11})/,/embed\/([^#\&\?]{11})/,/\/v\/([^#\&\?]{11})/];for(o=0;o<r.length;++o)if(r[o].test(e))return r[o].exec(e)[1];if(t.fuzzy){var i=e.split(/[\/\&\?=#\.\s]/g);for(o=0;o<i.length;++o)if(/^[^#\&\?]{11}$/.test(i[o]))return i[o]}}return null}})},function(e,t,o){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=o(4),n=o(0),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(i.P);t.Page=a;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.createEvent=function(e,t){if(""==e.title.trim()||""==e.message.trim()||""==e.add_to.trim()||""==e.date.trim())return t("Merci de remplir tous les champs");n.AR.POST(this.api_url+"api/index.php?res=event",e,t,function(){return t("error")})},t.prototype.getEvents=function(e){n.AR.GET(this.api_url+"api?res=events",function(t){try{var o=JSON.parse(t);e(o)}catch(e){console.log(e)}},function(){console.log("Fatal error 500")})},t.prototype.createUser=function(e,t){n.AR.POST(this.api_url+"api/index.php?res=new_user",e,t,function(){t("e:r")})},t.prototype.uploadPhotoProject=function(e,t){n.AR.POST(this.api_url+"api/index.php?res=photo",e,t,function(){t("e:r")})},t.prototype.uploadImage=function(e,t,o){if(null==e)return void alert("Erreur, vous devez uploader une capture");var r=new FormData;r.append("file",e);var i=new XMLHttpRequest;i.upload.addEventListener("progress",t,!1),i.addEventListener("load",function(e){var t=e.target.responseText;0==t.indexOf("file:../")?o(t.replace("file:../","")):(alert(t),o(void 0))},!1),i.addEventListener("error",function(){},!1),i.addEventListener("abort",function(){},!1),i.open("POST","api/index.php?res=image"),i.send(r)},t.prototype.uploadVideoProject=function(e,t){n.AR.POST(this.api_url+"api/index.php?res=video",e,t,function(){t("e:r")})},t.prototype.removeUserFromProject=function(e,t){n.AR.DELETE(this.api_url+"api/index.php?res=user&user_id="+e.user_id+"&project_id="+e.project_id,function(e){"ok"==e?t():t(e)})},t.prototype.addUserToProject=function(e,t){n.AR.POST(this.api_url+"api/index.php?res=user",e,function(e){"ok"==e?t():t(e)})},t.prototype.getAllUsers=function(e){n.AR.GET(this.api_url+"api?res=users",function(t){try{var o=JSON.parse(t);e(o)}catch(e){console.log(e)}},function(){console.log("Fatal error 500")})},t.prototype.getUsersProject=function(e){n.AR.GET(this.api_url+"api?res=user-projects",function(t){try{var o=JSON.parse(t);e(o)}catch(e){console.log(e)}})},t.prototype.getProjectById=function(e,t,o,r,i,a){n.AR.GET(this.api_url+"api?res=project&manager&id="+e,function(e){try{var n=JSON.parse(e);"error"!=n.type&&void 0==n.message?void 0!=r&&void 0!=i&&void 0!=a?t(n,r,i,a):void 0!=r?t(n,r):t(n):void 0!=o&&o(n)}catch(e){}})},t.prototype.updateProject=function(e){var t=Object.keys(e);if(t.forEach(function(o,r){if(""==e[o].trim())return alert("Paramètre "+t+" ne peut pas être vide !"),!1}),["video","photo","code","3d","jeu"].indexOf(e.type)<0)return alert("Le type "+e.type+" n'existe pas"),!1;1==confirm("Cette modification est irréversible, continuer ?")&&n.AR.PUT(this.api_url+"api/index.php?res=project",e,function(e){"ok"!=e?alert("Le serveur a rencontré une erreur inconnue : "+e):(alert("Projet mis à jour"),window.location.reload())})},t.prototype.getHistory=function(e,t){n.AR.GET(this.api_url+"api?res=history&id="+e,function(e){try{var o=JSON.parse(e);t(o)}catch(e){console.log(e)}})},t.prototype.createProject=function(e){return["video","photo","code","3d","jeu"].indexOf(e.type)<0?(alert("Le type "+e.type+" n'existe pas"),!1):e.name.trim().length<10?void alert("Donnez un nom plus grand"):e.shortDescription.length>250?(alert("Cette description est trop grande"),!1):e.shortDescription.length<50?(alert("Cette description est trop petite (entre 80 et 250 caractères)"),!1):void n.AR.POST(this.api_url+"api/index.php?res=project",e,function(e){0!=e.indexOf("ok")?alert("Le serveur a rencontré une erreur inconnue : "+e):(alert("Projet créé"),window.location.href="dashboard-my-projects")},function(){alert("Erreur 500 : internal server error")})},t.prototype.getAllMeetingReports=function(e){n.AR.GET(this.api_url+"api?res=pv",function(t){try{var o=JSON.parse(t);e(o)}catch(e){console.log(e)}})},t}(i.SharedModel);t.Model=d}]);